# 날짜 네비게이션 기능 개선 문서

## 기능 개요

Statistics.tsx 페이지의 날짜 범위 선택 및 네비게이션 기능을 개선했습니다.

### 개선된 기능

1. **간소화된 날짜 범위 옵션**
   - 오늘, 이번 주, 이번 달, 올해로 핵심 옵션만 유지
   - '지난 달', '지난 해' 버튼 제거로 더 직관적인 UI

2. **개선된 좌우 화살표 네비게이션**
   - 현재 선택된 날짜 범위를 기준으로 이전/다음 구간 이동
   - 연속적인 네비게이션 지원 (화살표를 계속 클릭하면 연속 이동)

3. **향상된 UI 디자인**
   - 4개 버튼에 최적화된 그리드 레이아웃
   - 호버 효과와 시각적 피드백 개선

## 기능 상세

### 날짜 범위 옵션

| 버튼 | 기본 범위 | 이전 화살표 | 다음 화살표 |
|------|----------|------------|------------|
| 오늘 | 오늘 날짜 | 현재 날짜 기준 이전 일 | 현재 날짜 기준 다음 일 |
| 이번 주 | 이번 주 (월~일) | 현재 주 기준 이전 주 | 현재 주 기준 다음 주 |
| 이번 달 | 이번 달 전체 | 현재 달 기준 이전 달 | 현재 달 기준 다음 달 |
| 올해 | 올해 전체 (1월 1일~12월 31일) | 현재 년도 기준 이전 해 | 현재 년도 기준 다음 해 |

### 개선된 네비게이션 동작

```typescript
// 예시 1: 현재 2025-05-15를 선택한 상태에서

// 오늘 버튼의 화살표 클릭
- 이전 화살표: 2025-05-14 (선택된 날짜 기준 이전 일)
- 다음 화살표: 2025-05-16 (선택된 날짜 기준 다음 일)

// 예시 2: 현재 2025-05-01~2025-05-31을 선택한 상태에서

// 이번 달 버튼의 화살표 클릭
- 이전 화살표: 2025-04-01 ~ 2025-04-30 (선택된 월 기준 이전 달)
- 다음 화살표: 2025-06-01 ~ 2025-06-30 (선택된 월 기준 다음 달)

// 연속 클릭 시: 
// 이전 화살표 또 클릭: 2025-03-01 ~ 2025-03-31
// 다음 화살표 계속 클릭: 2025-07-01 ~ 2025-07-31, 2025-08-01 ~ 2025-08-31...
```

## 구현 세부사항

### 핵심 유틸리티 함수

```typescript
const formatDateString = (date: Date): string => {
  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
};

const getDateRange = (type: string, offset: number = 0) => {
  const now = new Date();
  
  switch (type) {
    case 'day': 
      // 일간 계산 로직
    case 'week': 
      // 주간 계산 로직 (월요일~일요일)
    case 'month': 
      // 월간 계산 로직
    case 'year': 
      // 연간 계산 로직
  }
};
```

### 개선된 UI 구조

- **그리드 레이아웃**: 반응형 디자인으로 다양한 화면 크기에 최적화
- **버튼 그룹**: 각 날짜 범위를 좌우 화살표와 함께 그룹화
- **시각적 피드백**: 호버 효과와 색상 변화로 사용자 경험 향상

## 사용자 경험 개선점

1. **직관적인 네비게이션**: 달력을 넘기듯 쉽게 날짜 구간 이동
2. **빠른 접근**: 자주 사용하는 날짜 범위에 원클릭 접근
3. **일관된 동작**: 모든 날짜 범위에서 동일한 네비게이션 패턴
4. **시각적 명확성**: 현재 선택된 범위와 이동 방향이 명확

## 테스트 커버리지

### 추가된 테스트 케이스

1. **연간 범위 계산 테스트**
   - 올해 범위 정확성 검증
   - 지난 해 범위 정확성 검증

2. **네비게이션 기능 테스트**
   - 일간/주간/월간/연간 각각의 이전/다음 이동 검증
   - 경계값 처리 (예: 연도 변경, 월 변경) 검증

3. **Edge Case 테스트**
   - 윤년 처리
   - 월말/월초 경계
   - 주말 처리 (주간 계산 시)

## 기술적 개선사항

### 코드 구조화
- 날짜 계산 로직을 재사용 가능한 유틸리티 함수로 분리
- 각 날짜 범위 타입별로 일관된 인터페이스 제공

### 성능 최적화
- 날짜 계산 함수의 효율적인 구현
- 불필요한 Date 객체 생성 최소화

### 확장성
- 새로운 날짜 범위 타입 추가가 용이한 구조
- 네비게이션 로직의 일관된 패턴

## 파일 변경 사항

### 수정된 파일
- `src/pages/Statistics.tsx`: 
  - 새로운 날짜 범위 옵션 추가
  - 네비게이션 기능 구현
  - UI 디자인 개선

### 추가된 파일
- `src/tests/dateRangeUtils.test.ts`: 
  - 날짜 계산 로직 테스트 추가
  - 네비게이션 기능 테스트 추가

## 사용 방법

1. **기본 날짜 범위 선택**: 원하는 날짜 범위 버튼 클릭
2. **이전 구간 이동**: 왼쪽 화살표(◀) 클릭
3. **다음 구간 이동**: 오른쪽 화살표(▶) 클릭
4. **수동 날짜 입력**: 여전히 날짜 입력 필드를 통한 세밀한 조정 가능

## 향후 개선 계획

1. **키보드 단축키**: 방향키를 이용한 날짜 네비게이션
2. **즐겨찾기**: 자주 사용하는 날짜 범위 저장 기능
3. **상대적 날짜**: "최근 7일", "최근 30일" 등의 상대적 범위
4. **커스텀 범위**: 사용자 정의 날짜 범위 저장 및 재사용

## 완료일
2025년 현재 날짜 